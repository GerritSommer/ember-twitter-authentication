<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ember Starter Kit</title>
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.css">
  <link rel="stylesheet" href="style.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://builds.handlebarsjs.com.s3.amazonaws.com/handlebars-v2.0.0.js"></script>
  <script src="http://builds.emberjs.com/tags/v1.9.1/ember.js"></script>
  <script src="http://builds.emberjs.com/tags/v1.0.0-beta.14.1/ember-data.js"></script>
  <script src="https://cdn.firebase.com/js/client/2.0.6/firebase.js"></script>
  <script src="https://cdn.firebase.com/libs/emberfire/1.3.3/emberfire.min.js"></script>
</head>
<body>

  <script type="text/x-handlebars">
    <h1>{{#link-to 'index'}}Ember + Firebase Twitter Authentication Demo{{/link-to}}</h1>

    {{outlet}}
  </script>

  <script type="text/x-handlebars" data-template-name="index">
    {{#if firebaseAuthService.waitingForUser}}
    <h2>Loading...</h2>
    {{else}}
      {{#if firebaseAuthService.currentUser}}
        {{#link-to 'protected'}}Protected Route{{/link-to}}
      {{else}}
        <p><button {{action 'login'}}>Login with Twitter</button></p>
      {{/if}}
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="denied">
    <img src="http://i.giphy.com/RddAJiGxTPQFa.gif" />
  </script>

  <script type="text/x-handlebars" data-template-name="protected">
    {{#if firebaseAuthService.currentUser}}
      <h2>@{{firebaseAuthService.currentUser.twitter.username}}</h2>
      <p><img {{bind-attr src=firebaseAuthService.currentUser.twitter.cachedUserProfile.profile_image_url_https}} /></p>
      {{#if firebaseAuthService.currentUser.twitter.cachedUserProfile.status}}
        <h3>Latest Tweet</h3>
        <p>{{firebaseAuthService.currentUser.twitter.cachedUserProfile.status.text}}</p>
      {{/if}}
      <p><button {{action 'logout'}}>Logout</button></p>
    {{else}}
      <p><button {{action 'login'}}>Login with Twitter</button></p>
    {{/if}}
  </script>

  <script src="app.js"></script>
</body>
</html>